<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Tela de Busca de Livros</title>
</head>
<body>
	<h1>Tela de Busca de Livros</h1>
	<form>
		<label for="titulo">Título:</label>
		<input type="text" id="titulo" name="titulo"><br><br>
		<label for="autor">Autor:</label>
		<input type="text" id="autor" name="autor"><br><br>
		<button type="button" onclick="buscarLivros()">Buscar</button>
	</form>
	<div id="resultado"></div>
	<button type="button" class="print-button" onclick="window.print()" && onclick="gerarRelatorio()">Imprimir resultado</button>
    <button type="button" onclick="gerarRelatorio()">Código</button>

	<script>
		const livros = [
			{titulo: "O Senhor dos Anéis", autor: "J.R.R. Tolkien", ano: 1954},
			{titulo: "1984", autor: "George Orwell", ano: 1949},
			{titulo: "Cem Anos de Solidão", autor: "Gabriel García Márquez", ano: 1967}
		];

		function buscarLivros() {
			const titulo = document.getElementById("titulo").value.toLowerCase();
			const autor = document.getElementById("autor").value.toLowerCase();
			let resultado = "";

			for (let livro of livros) {
				if ((titulo === "" || livro.titulo.toLowerCase().includes(titulo)) &&
				    (autor === "" || livro.autor.toLowerCase().includes(autor))) {
					resultado += "<p><strong>" + livro.titulo + "</strong>, " + livro.autor + ", " + livro.ano + "</p>";
				}
			}

			document.getElementById("resultado").innerHTML = resultado;
            
		}

        // Gerar código para recuperar resultados
			const codigo = Math.floor(Math.random() * 90000) + 10000;
			document.getElementById("codigo-resultado").innerHTML = codigo;
			document.getElementById("codigo-resultado").style.display = "block";
			document.getElementById("relatorio-resultado").style.display = "block";
			document.getElementById("link-resultado").href = "#resultado-" + codigo;

		function gerarRelatorio() {
			const titulo = document.getElementById("titulo").value.toLowerCase();
			const autor = document.getElementById("autor").value.toLowerCase();
			let resultado = "";

			for (let livro of livros) {
				if ((titulo === "" || livro.titulo.toLowerCase().includes(titulo)) &&
				    (autor === "" || livro.autor.toLowerCase().includes(autor))) {
					resultado += "<p><strong>" + livro.titulo + "</strong>, " + livro.autor + ", " + livro.ano + "</p>";
				}
			}

			const codigo = Math.floor(Math.random() * (99999 - 10000 + 1)) + 10000;

			alert("Código de recuperação: " + codigo);
			// Aqui você pode enviar o resultado e o código para um servidor ou armazená-los em cookies ou localStorage
		}

	</script>
</body>
</html>



<!--
	Comentário
-->